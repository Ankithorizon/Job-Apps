<div fxLayout="row wrap" class="parent" fxLayout.lg="row " fxLayout.md="row" fxLayout.sm="column" fxLayout.xs="column">

    <div fxFlex="10%" class="left">
    </div>

    <div fxFlex="80%" class="middle">
        <div class="pageHeader">
            Follow - Up
        </div>    

        <div class="filterDiv">
            <mat-card class="mat-elevation-z4 filter-mat-card">            
                <mat-card-content>
                    <form [formGroup]="filterForm">
                        <mat-form-field class="form-field small-form-field" appearance="fill">
                            <mat-label>Province</mat-label>
                            <select matNativeControl (change)="changeProvince($event)" formControlName="province">
                                <option value="">Choose Province</option>
                                <option *ngFor="let p of provinceCollection">
                                    {{p}}
                                </option>
                            </select>
                        </mat-form-field>
                        <span>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        </span>
                        <mat-form-field class="form-field small-form-field" appearance="fill">
                            <mat-label>City</mat-label>
                            <select matNativeControl formControlName="city">
                                <option value="">Choose City</option>
                                <option *ngFor="let c of cityCollection">
                                    {{c}}
                                </option>
                            </select>
                        </mat-form-field>
                        <span>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        </span>
                        <mat-form-field class="form-field" appearance="outline">
                            <mat-label> Contact-Person's Name
                            </mat-label>
                            <input matInput formControlName="contactPersonName">
                        </mat-form-field>
                        <span>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        </span>                     

                        <mat-form-field appearance="fill">
                            <mat-label>Enter Applied On Date Range</mat-label>
                            <mat-date-range-input [rangePicker]="picker">
                                <input 
                                    formControlName="appliedOnStart"
                                    matStartDate placeholder="Applied On Start Date">
                                <input 
                                    formControlName="appliedOnEnd"
                                    matEndDate placeholder="Applied On End Date">
                            </mat-date-range-input>
                            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                            <mat-date-range-picker #picker></mat-date-range-picker>
                        </mat-form-field>

                        <p></p>
                        <button (click)="filterNow()" mat-raised-button color="primary" type="button">Filter Now!
                        </button>
                    </form>
                </mat-card-content>
            </mat-card>
        </div>

        <div *ngIf="(jobApps?.length > 0)">
            <div *ngFor="let job of jobApps" class="mainContent-mat-card">
                <mat-card                     
                    class="mat-elevation-z4 jobApps-mat-card">
                    <mat-card-header>
                        <mat-card-title                        
                            [style.color]="localDataService.getAppStatusTypeColor(job.appStatus)"
                            *ngIf="appStatusTypes?.length>0">
                            <button class="mat-raised-button mat-accent" 
                                (click)="viewJobDetails(job)">
                                <mat-icon>view_module</mat-icon>
                            </button>
                            <span>&nbsp;</span>
                            <button class="mat-raised-button mat-primary" 
                                (click)="openDialog(job)">
                                <mat-icon>edit</mat-icon>
                            </button>
                            <span>&nbsp;</span>
                            <button class="mat-raised-button mat-warn" 
                                (click)="deleteJobDetails(job)">
                                <mat-icon>delete</mat-icon>
                            </button>
                            <span>&nbsp;&nbsp;&nbsp;</span>


                            [{{displayAppStatusType(job.appStatus)}}]
                            <span>&nbsp;&nbsp;&nbsp;</span>
                            {{job.appliedOn | date : "MMMM d, y"}} @ {{job.city}},{{job.province}}

                          
                            
                        </mat-card-title>
                    </mat-card-header>     
                    <mat-card-content>
                        <div fxLayout="row wrap" class="parent" fxLayout.lg="row " fxLayout.md="row" fxLayout.sm="column" fxLayout.xs="column">
                            <div fxFlex="50%">
                                <p>
                                    Contact Name : <span *ngIf="job.contactPersonName; else notAv">{{job.contactPersonName}}</span>
                                </p>                             
                                <p>
                                    Contact Email : <span *ngIf="job.contactEmail; else notAv">{{job.contactEmail}}</span>
                                </p>
                                <p>
                                    Phone : <span *ngIf="job.phoneNumber; else notAv">{{job.phoneNumber}}</span>
                                </p>
                            </div>
                            <div fxFlex="50%">
                                <p>
                                    Company : <span *ngIf="job.companyName; else notAv">{{job.companyName}}</span>
                                </p>
                                <p>
                                    Agency : <span *ngIf="job.agencyName; else notAv">{{job.agencyName}}</span>
                                </p>
                                <p>
                                    URL : <span *ngIf="job.webURL; else notAv">{{job.webURL}}</span>
                                </p>
                            </div>
                        </div>                     
                    </mat-card-content>
                </mat-card>
            </div>
        </div>
    </div>
</div>

<ng-template #notAv>
    N/A
</ng-template>